{"version":3,"sources":["apis/streams.js","history.js","actions/types.js","actions/index.js","components/streams/StreamForm.js","components/streams/StreamCreate.js","components/streams/StreamEdit.js","components/Modal.js","components/streams/StreamDelete.js","components/streams/StreamList.js","components/streams/StreamShow.js","components/GoogleAuth.js","components/Header.js","components/App.js","reducers/authReducer.js","reducers/streamReducer.js","reducers/index.js","index.js"],"names":["axios","create","baseURL","createBrowserHistory","SIGN_IN","SIGN_OUT","CREATE_STREAM","FETCH_STREAMS","FETCH_STREAM","DELETE_STREAM","EDIT_STREAM","fetchStream","id","dispatch","a","streams","get","response","type","payload","data","StreamForm","props","renderError","error","touched","className","renderInput","input","label","meta","autoComplete","initialValues","onSubmit","formValues","validate","errors","title","description","render","handleSubmit","name","component","StreamCreate","createStream","this","React","Component","connect","getState","userId","auth","post","history","push","StreamEdit","editStream","match","params","stream","_","pick","state","ownProps","patch","Modal","ReactDOM","createPortal","onClick","onDismiss","e","stopPropagation","content","actions","document","querySelector","StreamDelete","Fragment","deleteStream","to","renderContent","renderActions","delete","StreamList","fetchStreams","currentUserId","map","renderAdmin","isSignedIn","style","textAlign","renderList","renderCreate","Object","values","StreamShow","videoRef","createRef","buildPlayer","player","destroy","flv","createPlayer","url","attachMediaElement","current","load","ref","width","controls","GoogleAuth","onAuthChange","signIn","currentUser","getId","signOut","onSignInClick","onSignOutClick","window","gapi","client","init","clientId","scope","then","auth2","getAuthInstance","listen","renderAuthButton","Header","App","path","exact","INTIAL_STATE","authReducer","action","streamReducer","mapKeys","omit","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk"],"mappings":"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","file":"static/js/main.6c653e2c.chunk.js","sourcesContent":["import axios from 'axios';\n\nexport default axios.create({\n  baseURL: 'http://localhost:3001'\n});\n","import { createBrowserHistory } from 'history';\nexport default createBrowserHistory();\n","export const SIGN_IN = 'SIGN_IN';\nexport const SIGN_OUT = 'SIGN_OUT';\nexport const CREATE_STREAM = 'CREATE_STREAM';\nexport const FETCH_STREAMS = 'FETCH_STREAMS';\nexport const FETCH_STREAM = 'FETCH_STREAM';\nexport const DELETE_STREAM = 'DELETE_STREAM';\nexport const EDIT_STREAM = 'EDIT_STREAM';\n","import streams from \"../apis/streams\";\nimport history from \"../history\";\nimport {\n  SIGN_IN,\n  SIGN_OUT,\n  CREATE_STREAM,\n  FETCH_STREAMS,\n  FETCH_STREAM,\n  DELETE_STREAM,\n  EDIT_STREAM,\n} from \"./types\";\n\nexport const signIn = (userId) => {\n  return {\n    type: SIGN_IN,\n    payload: userId,\n  };\n};\n\nexport const signOut = () => {\n  return {\n    type: SIGN_OUT,\n  };\n};\n\nexport const createStream = (formValues) => async (dispatch, getState) => {\n  const { userId } = getState().auth;\n  const response = await streams.post(\"/streams\", { ...formValues, userId });\n\n  dispatch({ type: CREATE_STREAM, payload: response.data });\n  history.push(\"/\");\n};\n\nexport const fetchStreams = () => async (dispatch) => {\n  const response = await streams.get(\"/streams\");\n\n  dispatch({ type: FETCH_STREAMS, payload: response.data });\n};\n\nexport const fetchStream = (id) => async (dispatch) => {\n  const response = await streams.get(`/streams/${id}`);\n\n  dispatch({ type: FETCH_STREAM, payload: response.data });\n};\n\nexport const editStream = (id, formValues) => async (dispatch) => {\n  const response = await streams.patch(`/streams/${id}`, formValues);\n\n  dispatch({ type: EDIT_STREAM, payload: response.data });\n  history.push(\"/\");\n};\n\nexport const deleteStream = (id) => async (dispatch) => {\n  await streams.delete(`/streams/${id}`);\n\n  dispatch({ type: DELETE_STREAM, payload: id });\n  history.push(\"/\");\n};\n","import React from \"react\";\nimport { Form, Field } from \"react-final-form\";\n\nconst StreamForm = (props) => {\n  const renderError = ({ error, touched }) => {\n    if (touched && error) {\n      return (\n        <div className=\"ui error message\">\n          <div className=\"header\">{error}</div>\n        </div>\n      );\n    }\n  };\n\n  const renderInput = ({ input, label, meta }) => {\n    const className = `field ${meta.error && meta.touched ? \"error\" : \"\"}`;\n    return (\n      <div className={className}>\n        <label>{label}</label>\n        <input {...input} autoComplete=\"off\" />\n        {renderError(meta)}\n      </div>\n    );\n  };\n\n  const onSubmit = (formValues) => {\n    props.onSubmit(formValues);\n  };\n\n  return (\n    <Form\n      initialValues={props.initialValues}\n      onSubmit={onSubmit}\n      validate={(formValues) => {\n        const errors = {};\n\n        if (!formValues.title) {\n          errors.title = \"You must enter a title\";\n        }\n\n        if (!formValues.description) {\n          errors.description = \"You must enter a description\";\n        }\n\n        return errors;\n      }}\n      render={({ handleSubmit }) => (\n        <form onSubmit={handleSubmit} className=\"ui form error\">\n          <Field name=\"title\" component={renderInput} label=\"Enter Title\" />\n          <Field\n            name=\"description\"\n            component={renderInput}\n            label=\"Enter Description\"\n          />\n          <button className=\"ui inverted pink button\">Submit</button>\n        </form>\n      )}\n    />\n  );\n};\n\nexport default StreamForm;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { createStream } from \"../../actions\";\nimport StreamForm from \"./StreamForm\";\n\nclass StreamCreate extends React.Component {\n  onSubmit = (formValues) => {\n    this.props.createStream(formValues);\n  };\n\n  render() {\n    return (\n      <div>\n        <h3> Create a Stream</h3>\n        <StreamForm onSubmit={this.onSubmit} />\n      </div>\n    );\n  }\n}\n\nexport default connect(null, { createStream })(StreamCreate);\n","import _ from \"lodash\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchStream, editStream } from \"../../actions\";\nimport StreamForm from \"./StreamForm\";\n\nclass StreamEdit extends React.Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n\n  onSubmit = (formValues) => {\n    this.props.editStream(this.props.match.params.id, formValues);\n  };\n\n  render() {\n    if (!this.props.stream) {\n      return <div>Loading...</div>;\n    }\n    return (\n      <div>\n        <h3>Edit a Stream</h3>\n        <StreamForm\n          initialValues={_.pick(this.props.stream, \"title\", \"description\")}\n          onSubmit={this.onSubmit}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream, editStream })(\n  StreamEdit\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst Modal = props => {\n  return ReactDOM.createPortal(\n    <div onClick={props.onDismiss} className=\"ui dimmer modals visible active\">\n      <div\n        onClick={e => e.stopPropagation()}\n        className=\"ui standard modal visible active\"\n      >\n        <div className=\"header\">{props.title}</div>\n        <div className=\"content\">{props.content}</div>\n        <div className=\"actions\">{props.actions}</div>\n      </div>\n    </div>,\n    document.querySelector('#modal')\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Modal from '../Modal';\nimport history from '../../history';\nimport { fetchStream, deleteStream } from '../../actions';\n\nclass StreamDelete extends React.Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n\n  renderActions() {\n    const { id } = this.props.match.params;\n\n    return (\n      <React.Fragment>\n        <button\n          onClick={() => this.props.deleteStream(id)}\n          className=\"ui button negative stackable \"\n        >\n          Delete\n        </button>\n        <Link to=\"/\" className=\"ui button stackable \">\n          Cancel\n        </Link>\n      </React.Fragment>\n    );\n  }\n\n  renderContent() {\n    if (!this.props.stream) {\n      return 'Are you sure you want to delete this stream?';\n    }\n\n    return `Are you sure you want to delete the stream with title: ${this.props.stream.title\n      }`;\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Delete Stream\"\n        content={this.renderContent()}\n        actions={this.renderActions()}\n        onDismiss={() => history.push('/')}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchStream, deleteStream }\n)(StreamDelete);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { fetchStreams } from '../../actions';\n\nclass StreamList extends React.Component {\n  componentDidMount() {\n    this.props.fetchStreams();\n  }\n\n  renderAdmin(stream) {\n    if (stream.userId === this.props.currentUserId) {\n      return (\n        <div className=\"right floated content stackable \">\n          <Link to={`/streams/edit/${stream.id}`} className=\"ui inverted olive button\">\n            Edit\n          </Link>\n          <Link\n            to={`/streams/delete/${stream.id}`}\n            className=\"ui inverted red button negative stackable \"\n          >\n            Delete\n          </Link>\n        </div>\n      );\n    }\n  }\n\n  renderList() {\n    return this.props.streams.map(stream => {\n      return (\n        <div className=\"item\" key={stream.id}>\n          {this.renderAdmin(stream)}\n          <i className=\"large middle aligned icon camera\" />\n          <div className=\"content\">\n            <Link to={`/streams/${stream.id}`} className=\"header\">\n              {stream.title}\n            </Link>\n            <div className=\"description\">{stream.description}</div>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  renderCreate() {\n    if (this.props.isSignedIn) {\n      return (\n        <div style={{ textAlign: 'right' }}>\n          <Link to=\"/streams/new\" className=\"ui button primary\">\n            Create Stream\n          </Link>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>Streams</h2>\n        <div className=\"ui celled list\">{this.renderList()}</div>\n        {this.renderCreate()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    streams: Object.values(state.streams),\n    currentUserId: state.auth.userId,\n    isSignedIn: state.auth.isSignedIn\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchStreams }\n)(StreamList);\n","import React from 'react';\nimport flv from 'flv.js';\nimport { connect } from 'react-redux';\nimport { fetchStream } from '../../actions';\n\nclass StreamShow extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.videoRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n\n    this.props.fetchStream(id);\n    this.buildPlayer();\n  }\n\n  componentDidUpdate() {\n    this.buildPlayer();\n  }\n\n  componentWillUnmount() {\n    this.player.destroy();\n  }\n\n  buildPlayer() {\n    if (this.player || !this.props.stream) {\n      return;\n    }\n\n    const { id } = this.props.match.params;\n    this.player = flv.createPlayer({\n      type: 'flv',\n      url: `http://localhost:8000/live/${id}.flv`\n    });\n    this.player.attachMediaElement(this.videoRef.current);\n    this.player.load();\n  }\n\n  render() {\n    if (!this.props.stream) {\n      return <div>Loading...</div>;\n    }\n\n    const { title, description } = this.props.stream;\n\n    return (\n      <div className=\"stackable\">\n        <video ref={this.videoRef} style={{ width: '100%' }} controls />\n        <h1>{title}</h1>\n        <h5>{description}</h5>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchStream }\n)(StreamShow);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { signIn, signOut } from '../actions';\n\nclass GoogleAuth extends React.Component {\n    componentDidMount() {\n        window.gapi.load('client:auth2', () => {\n            window.gapi.client\n                .init({\n                    clientId: '276015738139-gvof2b9sggiv3gtbp400qs9iaok1239j.apps.googleusercontent.com',\n                    scope: 'email'\n                })\n                .then(() => {\n                    this.auth = window.gapi.auth2.getAuthInstance();\n\n                    this.onAuthChange(this.auth.isSignedIn.get());\n                    this.auth.isSignedIn.listen(this.onAuthChange);\n                });\n        });\n    }\n\n    onAuthChange = isSignedIn => {\n        if (isSignedIn) {\n            this.props.signIn(this.auth.currentUser.get().getId());\n        } else {\n            this.props.signOut();\n        }\n    };\n\n    onSignInClick = () => {\n        this.auth.signIn();\n    };\n\n    onSignOutClick = () => {\n        this.auth.signOut();\n    };\n\n    renderAuthButton() {\n        if (this.props.isSignedIn === null) {\n            return null;\n        } else if (this.props.isSignedIn) {\n            return (< button onClick={this.onSignOutClick}\n                className=\"ui red google button stackable\" >\n                <i className=\"google icon\" />\n                Sign Out </button>\n            );\n        } else {\n            return (\n                <button onClick={this.onSignInClick}\n                    className=\"ui red google button stackable\" >\n                    <\n                        i className=\"google icon\" />\n                    Sign In with Google\n                </button>\n            );\n        }\n    }\n\n    render() {\n        return <div> {this.renderAuthButton()} </div>;\n    }\n}\n\nconst mapStateToProps = state => {\n    return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(\n    mapStateToProps, { signIn, signOut }\n)(GoogleAuth);","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport GoogleAuth from './GoogleAuth';\n\nconst Header = () => {\n  return (\n    <div className=\"ui secondary pointing menu stackable\">\n      <Link to=\"/\" className=\"item\">\n        Stream App\n      </Link>\n      <div className=\"right menu stackable\">\n        <Link to=\"/\" className=\"item stackable\">\n          All Streams\n        </Link>\n        <GoogleAuth />\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport StreamCreate from './streams/StreamCreate';\nimport StreamEdit from './streams/StreamEdit';\nimport StreamDelete from './streams/StreamDelete';\nimport StreamList from './streams/StreamList';\nimport StreamShow from './streams/StreamShow';\nimport Header from './Header';\nimport history from '../history';\n\nconst App = () => {\n  return (\n    <div className=\"ui container\">\n      <Router history={history}>\n        <div>\n          <Header />\n          <Switch className=\"stackable\">\n            <Route path=\"/\" exact component={StreamList} />\n            <Route path=\"/streams/new\" exact component={StreamCreate} />\n            <Route path=\"/streams/edit/:id\" exact component={StreamEdit} />\n            <Route path=\"/streams/delete/:id\" exact component={StreamDelete} />\n            <Route path=\"/streams/:id\" exact component={StreamShow} />\n          </Switch>\n        </div>\n      </Router>\n    </div>\n  );\n};\n\nexport default App;\n","import { SIGN_IN, SIGN_OUT } from \"../actions/types\";\n\nconst INTIAL_STATE = {\n  isSignedIn: null,\n  userId: null,\n};\n\nconst authReducer = (state = INTIAL_STATE, action) => {\n  switch (action.type) {\n    case SIGN_IN:\n      return { ...state, isSignedIn: true, userId: action.payload };\n    case SIGN_OUT:\n      return { ...state, isSignedIn: false, userId: null };\n    default:\n      return state;\n  }\n};\nexport default authReducer;\n","import _ from \"lodash\";\nimport {\n  FETCH_STREAM,\n  FETCH_STREAMS,\n  CREATE_STREAM,\n  EDIT_STREAM,\n  DELETE_STREAM,\n} from \"../actions/types\";\n\nconst streamReducer = (state = {}, action) => {\n  switch (action.type) {\n    case FETCH_STREAMS:\n      return { ...state, ..._.mapKeys(action.payload, \"id\") };\n    case FETCH_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case CREATE_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case EDIT_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case DELETE_STREAM:\n      return _.omit(state, action.payload);\n    default:\n      return state;\n  }\n};\nexport default streamReducer;\n","import { combineReducers } from \"redux\";\n\nimport authReducer from \"./authReducer\";\nimport streamReducer from \"./streamReducer\";\n\nexport default combineReducers({\n  auth: authReducer,\n  streams: streamReducer,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport reduxThunk from 'redux-thunk';\n\nimport App from './components/App';\nimport reducers from './reducers';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}